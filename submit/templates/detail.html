{% extends 'base.html' %}
{% load static %}

{% block title %}제출 #{{ submit_id }}{% endblock %}

{% block style %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'detail.css' %}">
{% endblock %}

{% block module %}
    {{ block.super }}
{% endblock %}

{% block content %}
    <header>
        <h3><a href="/problem/{{ problem_id }}">{{ problem_id }}</a> / <a href="/submit/{{ submit_id }}"><u>#{{ submit_id }}</u></a></h3>
        <br>
        <h1 id="result">
            {{ result_message }}
        </h1>
        {% if result == 'RTE' %}
        <pre><code>{{ stderr }}</code></pre>
        {% endif %}
        {% if result == 'CP' %}
        <section>
            <aside>
                <h3>출력</h3>
                <pre><code>{{ stdout }}</code></pre>
                </aside>
        </section>
        {% endif %}
    </header>

    <section>

        {% if result == 'WA' or result == 'TLE' or result == 'RTE' %}
            <aside>
                <h3>틀린 입력</h3>
                <h5><a href="#std">입출력 보기</a></h5>
            </aside>
        {% endif %}

        {% if result == 'AC' or result == 'CP' %}
            <aside>
                <h3>최대 소요 시간</h3>
                <h5>{{ time_usage }} <small>ms</small></h5>
            </aside>
            <aside>
                <h3>최대 메모리 사용량</h3>
                <h5>{{ memory_usage }} <small>KB</small></h5>
            </aside>
        {% endif %}

        <aside>
            <h3>코드</h3>
            <h5><a href="#code">코드 보기</a> <small>({{ code_length }} byte)</small></h5>
        </aside>
        <aside>
            <h4>문제 번호</h4>
            <h5><a href="/problem/{{ problem_id }}">{{ problem_id }}</a></h5>
        </aside>
        <aside>
            <h4>제출 시각</h4>
            <h5>{{ submit_time }}</h5>
        </aside>
        <aside>
            <h4>사용자</h4>
            <h5>{{ user_id }}</h5>
        </aside>
        <aside>
            <h4>제출 번호</h4>
            <h5><a href="/submit/{{ submit_id }}">{{ submit_id }}</a></h5>
        </aside>

    </section>

    <br>
    <h4>코드</h4>
    <section id="code"><pre><code>{{ code }}</code></pre>
    </section>

    {% if result == 'CP' or result == 'WA' or result == 'TLE' or result == 'MLE' or result == 'RTE' %}

    <div id="std">
        <section>
            <aside>
                <h3>입력</h3>
                <pre><code>{{ stdin }}</code></pre>
            </aside>

            {% if result == 'WA' %}
            <aside>
                <h3>출력 정답</h3>
                <pre><code>{{ correct_stdout }}</code></pre>
            </aside>
            {% endif %}

            {% if result == 'WA' or result == 'MLE' or result == 'RTE' %}
            <aside>
                <h3>출력</h3>
                <pre><code>{{ stdout }}</code></pre>
            </aside>
            {% endif %}
        </section>
    </div>
    {% endif %}

    {% if result != 'AC' and result != 'CP' %}
        <script src="{% static 'ws.js' %}"></script>
        <script>
            register('{{ submit_id }}');
        </script>
    {% endif %}
{% endblock %}
