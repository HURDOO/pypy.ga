# Generated by Django 4.0.7 on 2022-09-10 23:18

from django.db import migrations, models
import json.decoder
import json.encoder


def migrate_stderr_to_json(apps, schema_editor):
    Submit = apps.get_model('submit', 'Submit')
    for obj in Submit.objects.all():
        if obj.stderr is not None:
            obj.stderr = json.dumps({'stderr': obj.stderr})
        obj.save()


class Migration(migrations.Migration):

    dependencies = [
        ('submit', '0004_submit_last_case_idx'),
    ]

    operations = [
        migrations.AlterField(
            model_name='submit',
            name='result',
            field=models.CharField(choices=[('AC', 'âœ… ë§ì•˜ìŠµë‹ˆë‹¤!!'), ('WA', 'âŒ í‹€ë ¸ìŠµë‹ˆë‹¤'), ('CP', 'âœ… ì‹¤í–‰ ì™„ë£Œ'), ('TLE', 'â³ ì‹œê°„ ì´ˆê³¼'), ('MLE', 'ğŸ’£ ë©”ëª¨ë¦¬ ì´ˆê³¼'), ('OLE', 'ğŸ“ ì¶œë ¥ ì´ˆê³¼'), ('RTE', 'ğŸ’¥ ì˜¤ë¥˜ ë°œìƒ'), ('PRE', 'ğŸš© ì¤€ë¹„ ì¤‘'), ('ON', 'ğŸ” ì±„ì  ì¤‘'), ('IE', 'âš ï¸ë‚´ë¶€ ì˜¤ë¥˜')], default='PRE', max_length=3),
        ),
        migrations.RunPython(migrate_stderr_to_json),
        migrations.AlterField(
            model_name='submit',
            name='stderr',
            field=models.JSONField(decoder=json.decoder.JSONDecoder, encoder=json.encoder.JSONEncoder, null=True),
        ),
    ]
